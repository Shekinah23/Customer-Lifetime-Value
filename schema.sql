-- Drop existing tables if they exist
DROP TABLE IF EXISTS charges;
DROP TABLE IF EXISTS products;
DROP TABLE IF EXISTS transactions;
DROP TABLE IF EXISTS clients;
DROP TABLE IF EXISTS dashboard;

-- Create charges table
CREATE TABLE charges (
    CHARGES_ENTITY_NUM INTEGER NOT NULL,
    CHARGES_CHG_CODE TEXT NOT NULL,
    CHARGES_PROD_CODE INTEGER NOT NULL,
    CHARGES_AC_TYPE TEXT NOT NULL,
    CHARGES_ACSUB_TYPE INTEGER NOT NULL,
    CHARGES_SCHEME_CODE TEXT NOT NULL,
    CHARGES_CHG_TYPE TEXT NOT NULL,
    CHARGES_CHG_CURR TEXT NOT NULL,
    CHARGES_LATEST_EFF_DATE TEXT NOT NULL,
    CHARGES_CHG_AMT_CHOICE INTEGER NOT NULL,
    CHARGES_COMBINATION_CHOICE TEXT,
    CHARGES_CHGS_PERCENTAGE REAL,
    CHARGES_FIXED_AMT REAL NOT NULL,
    CHARGES_VAR_NOOF_SLABS REAL,
    CHARGES_SLAB_AMT_CHOICE TEXT,
    CHARGES_CHG_SLAB_CHOICE TEXT,
    CHARGES_OVERALL_MIN_AMT REAL,
    CHARGES_OVERALL_MAX_AMT REAL
);

-- Create products table
CREATE TABLE products (
    PRODUCT_CODE INTEGER NOT NULL,
    PRODUCT_NAME TEXT NOT NULL,
    PRODUCT_CONC_NAME TEXT NOT NULL,
    PRODUCT_ALPHA_ID TEXT,
    PRODUCT_GROUP_CODE TEXT NOT NULL,
    PRODUCT_CLASS TEXT NOT NULL,
    PRODUCT_FOR_DEPOSITS INTEGER NOT NULL,
    PRODUCT_FOR_LOANS INTEGER NOT NULL,
    PRODUCT_FOR_RUN_ACS INTEGER NOT NULL,
    PRODUCT_OD_FACILITY INTEGER NOT NULL,
    PRODUCT_REVOLVING_FACILITY INTEGER NOT NULL,
    PRODUCT_FOR_CALL_DEP INTEGER NOT NULL,
    PRODUCT_CONTRACT_ALLOWED INTEGER NOT NULL,
    PRODUCT_CONTRACT_NUM_GEN TEXT,
    PRODUCT_EXEMPT_FROM_NPA INTEGER NOT NULL,
    PRODUCT_REQ_APPLN_ENTRY INTEGER NOT NULL,
    PRODUCT_FOR_RFC INTEGER NOT NULL,
    PRODUCT_FOR_FCLS INTEGER NOT NULL,
    PRODUCT_FOR_FCNR INTEGER NOT NULL,
    PRODUCT_FOR_EEFC INTEGER NOT NULL,
    PRODUCT_FOR_TRADE_FINANCE INTEGER NOT NULL,
    PRODUCT_FOR_LOCKERS INTEGER NOT NULL,
    PRODUCT_INDIRECT_EXP_REQD INTEGER NOT NULL,
    PRODUCT_BUSDIVN_CODE TEXT,
    PRODUCT_GLACC_CODE INTEGER NOT NULL,
    PRODUCT_REVOKED_ON REAL,
    PRODUCT_ENTD_BY TEXT NOT NULL,
    PRODUCT_ENTD_ON TEXT NOT NULL,
    PRODUCT_LAST_MOD_BY TEXT,
    PRODUCT_LAST_MOD_ON TEXT,
    PRODUCT_AUTH_BY TEXT NOT NULL,
    PRODUCT_AUTH_ON TEXT NOT NULL,
    TBA_MAIN_KEY TEXT,
    PRODUCT_FOR_FIXED_ASSETS INTEGER NOT NULL,
    PRODUCT_FOR_SAFE_CUS INTEGER NOT NULL
);

-- Create transactions table
CREATE TABLE transactions (
    ACNTS_BRN_CODE INTEGER NOT NULL,
    ACCOUNT_NUMBER REAL NOT NULL,
    ACNTS_CURR_CODE TEXT NOT NULL,
    ACNTS_CLIENT_NUM TEXT NOT NULL,
    ACCOUNT_NAME TEXT NOT NULL,
    ACNTS_LAST_TRAN_DATE TEXT NOT NULL,
    INDCLIENT_BIRTH_DATE TEXT,
    AGE REAL,
    ACCT_AGE INTEGER NOT NULL,
    CLCONTACT_RES_PHONE REAL,
    INDCLIENT_TEL_RES REAL
);

-- Create clients table
CREATE TABLE clients (
    ACNTS_ENTITY_NUM INTEGER NOT NULL,
    ACNTS_INTERNAL_ACNUM INTEGER NOT NULL,
    ACNTS_BRN_CODE INTEGER NOT NULL,
    ACNTS_CLIENT_NUM INTEGER NOT NULL,
    ACNTS_AC_SEQ_NUM INTEGER NOT NULL,
    ACNTS_ACCOUNT_NUMBER TEXT NOT NULL,
    ACNTS_PROD_CODE INTEGER NOT NULL,
    ACNTS_AC_TYPE INTEGER NOT NULL,
    ACNTS_AC_SUB_TYPE INTEGER NOT NULL,
    ACNTS_SCHEME_CODE TEXT,
    ACNTS_OPENING_DATE TEXT NOT NULL,
    ACNTS_AC_NAME1 TEXT NOT NULL,
    ACNTS_AC_NAME2 TEXT,
    ACNTS_SHORT_NAME TEXT,
    ACNTS_AC_ADDR1 TEXT,
    ACNTS_AC_ADDR2 TEXT,
    ACNTS_AC_ADDR3 TEXT,
    ACNTS_AC_ADDR4 TEXT,
    ACNTS_AC_ADDR5 TEXT,
    ACNTS_LOCN_CODE REAL,
    ACNTS_CURR_CODE TEXT NOT NULL,
    ACNTS_GLACC_CODE INTEGER NOT NULL,
    ACNTS_SALARY_ACNT INTEGER NOT NULL,
    ACNTS_PASSBK_REQD INTEGER NOT NULL,
    ACNTS_DCHANNEL_CODE TEXT,
    ACNTS_MKT_CHANNEL_CODE TEXT,
    ACNTS_MKT_BY_STAFF TEXT,
    ACNTS_MKT_BY_BRN REAL,
    ACNTS_DSA_CODE REAL,
    ACNTS_MODE_OF_OPERN INTEGER NOT NULL,
    ACNTS_MOPR_ADDN_INFO TEXT,
    ACNTS_REPAYABLE_TO INTEGER NOT NULL,
    ACNTS_SPECIAL_ACNT INTEGER NOT NULL,
    ACNTS_NOMINATION_REQD INTEGER NOT NULL,
    ACNTS_CREDIT_INT_REQD INTEGER NOT NULL,
    ACNTS_MINOR_ACNT INTEGER NOT NULL,
    ACNTS_POWER_OF_ATTORNEY INTEGER NOT NULL,
    ACNTS_CONNP_INV_NUM INTEGER NOT NULL,
    ACNTS_NUM_SIG_COMB REAL,
    ACNTS_TELLER_OPERN INTEGER NOT NULL,
    ACNTS_ATM_OPERN INTEGER NOT NULL,
    ACNTS_CALL_CENTER_OPERN INTEGER NOT NULL,
    ACNTS_INET_OPERN INTEGER NOT NULL,
    ACNTS_CR_CARDS_ALLOWED INTEGER NOT NULL,
    ACNTS_KIOSK_BANKING INTEGER NOT NULL,
    ACNTS_SMS_OPERN INTEGER NOT NULL,
    ACNTS_OD_ALLOWED INTEGER NOT NULL,
    ACNTS_CHQBK_REQD INTEGER NOT NULL,
    ACNTS_ARM_CRM TEXT,
    ACNTS_ARM_ROLE TEXT,
    ACNTS_BUSDIVN_CODE REAL,
    ACNTS_CREATION_STATUS TEXT NOT NULL,
    ACNTS_BASE_DATE TEXT NOT NULL,
    ACNTS_INOP_ACNT INTEGER NOT NULL,
    ACNTS_DORMANT_ACNT INTEGER NOT NULL,
    ACNTS_LAST_TRAN_DATE TEXT,
    ACNTS_NONSYS_LAST_DATE TEXT,
    ACNTS_INT_CALC_UPTO TEXT,
    ACNTS_MMB_INT_ACCR_UPTO REAL,
    ACNTS_INT_ACCR_UPTO TEXT,
    ACNTS_INT_DBCR_UPTO TEXT,
    ACNTS_TRF_TO_OVERDUE REAL,
    ACNTS_DB_FREEZED INTEGER NOT NULL,
    ACNTS_CR_FREEZED INTEGER NOT NULL,
    ACNTS_CONTRACT_BASED_FLG TEXT NOT NULL,
    ACNTS_ACST_UPTO_DATE REAL,
    ACNTS_LAST_STMT_NUM REAL,
    ACNTS_LAST_CHQBK_ISSUED REAL,
    ACNTS_CLOSURE_DATE TEXT,
    ACNTS_PREOPEN_ENTD_BY REAL,
    ACNTS_PREOPEN_ENTD_ON REAL,
    ACNTS_PREOPEN_LAST_MOD_BY REAL,
    ACNTS_PREOPEN_LAST_MOD_ON REAL,
    ACNTS_ENTD_BY TEXT NOT NULL,
    ACNTS_ENTD_ON TEXT NOT NULL,
    ACNTS_LAST_MOD_BY TEXT,
    ACNTS_LAST_MOD_ON TEXT,
    ACNTS_AUTH_BY TEXT NOT NULL,
    ACNTS_AUTH_ON TEXT NOT NULL,
    TBA_MAIN_KEY REAL,
    ACNTS_TENOR REAL,
    ACNTS_TENOR_DMY TEXT,
    ACNTS_MATURITY_DATE REAL,
    ACNTS_SALARY_PAY_AC REAL,
    ACNTS_APPL_NUM REAL,
    ACNTS_SLIPS_DIRECT_DB REAL,
    ACNTS_UDCH_CODE REAL,
    ACNTS_UDCH_SCHEME REAL,
    ACNTS_ESCHEAT_ACNT INTEGER NOT NULL,
    ACNTS_LAST_DB_INT_RECOVRY_DATE TEXT,
    ACNTS_MBLBNK_OPERN INTEGER,
    PRIMARY KEY (ACNTS_CLIENT_NUM, ACNTS_ACCOUNT_NUMBER)
);

-- Create dashboard table
CREATE TABLE dashboard (
    metric_id INTEGER PRIMARY KEY,
    metric_name TEXT NOT NULL,
    metric_value REAL NOT NULL,
    metric_unit TEXT NOT NULL,
    last_updated TEXT NOT NULL,
    description TEXT,
    trend_direction TEXT,  -- 'up', 'down', or 'stable'
    trend_value REAL,     -- Percentage change from previous period
    target_value REAL,    -- Target/goal for this metric
    period TEXT           -- Time period for the metric (e.g., 'monthly', 'yearly')
);
